paths:
  create:
    post:
      tags:
        - User
      summary: Create User
      x-router-controller: users_handler
      operationId: createUser_handler
      requestBody:
        description: Created User object
        content:
          application/json:
            schema:
              $ref: '#/schemas/Create'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
  login:
    post:
      tags:
        - User
      summary: Logs User into the system
      x-router-controller: users
      operationId: login_handler
      requestBody:
        description: Created User object
        content:
          application/json:
            schema:
              $ref: '#/schemas/Login'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/schemas/LoginResponse'
        '400':
          description: Invalid Username/password supplied
  loginByToken:
    post:
      tags:
        - User
      summary: Logs User into the system
      x-router-controller: users
      operationId: loginByToken_handler
      requestBody:
        description: Created User object
        content:
          application/json:
            schema:
              $ref: '#/schemas/LoginByToken'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/schemas/LoginResponse'
        '400':
          description: Invalid Username/password supplied
  logout:
    post:
      tags:
        - User
      summary: Logout user
      x-router-controller: users
      operationId: logout_handler
      requestBody:
        description: Access Token
        content:
          application/json:
            schema:
              $ref: '#/schemas/TokenBody'
      responses:
        '202':
          description: OK
  changePassword:
    post:
      tags:
        - User
      summary: Change Password
      x-router-controller: users
      operationId: passwordChange_handler
      requestBody:
        description: Changes user's password.
        content:
          application/json:
            schema:
              $ref: '#/schemas/PasswordChange'
      responses:
        '200':
          description: OK
  recoverPassword:
    post:
      tags:
        - User
      summary: Password recovery
      x-router-controller: users
      operationId: passwordRecovery_handler
      requestBody:
        description: Generates a token for users to change their password.
        content:
          application/json:
            schema:
              $ref: '#/schemas/PasswordRecovery'
      responses:
        '202':
          description: Accepted
  inputToken:
    post:
      tags:
        - User
      summary: Password recovery change
      x-router-controller: users
      operationId: passwordInputToken_handler
      requestBody:
        description: Generates a token for users to change their password.
        content:
          application/json:
            schema:
              $ref: '#/schemas/TokenReply'
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: boolean
                example: true

schemas:

  Create:
    type: object
    properties:
      username: {$ref: '#/properties/username'}
      email: {$ref: '#/properties/email'}
      password: {$ref: '#/properties/password'}

  Login:
    type: object
    properties:
      username: {$ref: '#/properties/username'}
      password: {$ref: '#/properties/password'}

  LoginByToken:
    type: object
    properties:
      accessToken: {$ref: '#/properties/token'}
  
  LoginResponse:
    type: object
    properties:
      username: {$ref: '#/properties/username'}
      email: {$ref: '#/properties/email'}
      accessToken: {$ref: '#/properties/token'}
  
  PasswordRecovery:
    type: object
    properties:
      email: {$ref: '#/properties/email'}
  
  PasswordChange:
    type: object
    properties:
      username: {$ref: '#/properties/username'}
      currentPassword: {$ref: '#/properties/password'}
      newPassword: {$ref: '#/properties/password'}
  
  TokenReply:
    type: object
    properties:
      validationToken: {$ref: '#/properties/token'}
      password: {$ref: '#/properties/password'}
  
  TokenBody:
    type: object
    properties:
      validationToken: {$ref: '#/properties/token'}

properties:

  username:
    type: string
    example: MateusBittencourt

  email:
    type: string
    format: email
    example: mateus.bittencourt@outlook.com

  password:
    type: string
    example: password

  token:
    type: string
    example: 00000000-0000-0000-0000-000000000000
